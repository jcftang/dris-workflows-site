
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="description" content="DRIS Workflows">
		<meta name="keywords" content="node-dri,node-fedora,tchpc,dri,dris-workflows,howest">
		<title>API for node-dri DRIS Workflows</title>
		<script type="text/javascript">var _sf_startpt = (new Date()).getTime()</script>
		<link rel="stylesheet" href="/css/bootstrap.css" type="text/css" media="all">
	</head>
	<div class="navbar">
		<div class="navbar-inner">
			<div class="container-fluid">
				<a class="brand" href="#">DRIS</a>
				<ul class="nav">
					<li>
						<a href="/">Home</a>
					</li>
					<li>
						<a href="/contact">Contact</a>
					</li>
					<li>
						<a href="all-pages">All Pages</a>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span12">
				<div class="span9">
					<article class="article">
						<div class="metadata">
							<h1><span class="title"><a href="./api-for-node-dri">API for node-dri</a></span><small> <span class="about">by <strong class="author"> <span class="name">jtang</span> <span class="github"></span> </strong> </span> <span class="about"> on <em><time class="date">Tuesday, Apr 10 2012</time></em></span> </small></h1>
							<div class="breadcrumbs">
								@: / 
							<a href="/api-for-node-dri" class="breadcrumb">api-for-node-dri</a></div>
						</div>
						<div class="content"><p>make[2]: Entering directory `/data/home/jtang/develop/dris-workflows-site/build/node-dri'
info: MongoDB: <a href="mongodb://localhost/dri">mongodb://localhost/dri</a>
info: DRI package configured
info: Fetched items
</p>
<h1>TOC</h1>
<ul>
<li><a href="#test-cases-for-node-dri-package">Test cases for node-dri package</a><ul>
<li><a href="#test-cases-for-node-dri-package-calling-getobjecttypesonsuccess-onerror-will-get-object-types">Calling getObjectTypes(onSuccess, onError), will get object types</a></li>
<li><a href="#test-cases-for-node-dri-package-calling-createobjectdata-onsuccess-onerror-to-create-a-collection">Calling createObject(data, onSuccess, onError) to create a collection</a></li>
<li><a href="#test-cases-for-node-dri-package-calling-createobjectdata-onsuccess-onerror-to-create-a-series">Calling createObject(data, onSuccess, onError) to create a series</a></li>
<li><a href="#test-cases-for-node-dri-package-calling-createobjectdata-onsuccess-onerror-to-create-an-item">Calling createObject(data, onSuccess, onError) to create an item</a></li>
<li><a href="#test-cases-for-node-dri-package-calling-getobjectid-onsuccess-onerror-to-get-an-item">Calling getObject(id, onSuccess, onError) to get an item</a></li>
<li><a href="#test-cases-for-node-dri-package-calling-getobjectid-onsuccess-onerror-to-get-an-item-and-convert-to-dublin-core">Calling getObject(id, onSuccess, onError) to get an item and convert to Dublin Core</a></li>
<li><a href="#test-cases-for-node-dri-package-calling-getobjectid-onsuccess-onerror-to-get-a-series">Calling getObject(id, onSuccess, onError) to get a Series</a></li>
<li><a href="#test-cases-for-node-dri-package-calling-getchildrenparentid-onsuccess-onerror-to-get-the-children-of-a-series">Calling getChildren(parentId, onSuccess, onError) to get the children of a series</a></li>
<li><a href="#test-cases-for-node-dri-package-calling-getobjectid-onsuccess-onerror-to-get-a-collection">Calling getObject(id, onSuccess, onError) to get a collection</a></li>
<li><a href="#test-cases-for-node-dri-package-calling-approveitemid-fedoranamespace-onsuccess-onerror-with-a-item-id">Calling approveItem(id, fedoraNamespace, onSuccess, onError) with a item id</a></li>
<li><a href="#test-cases-for-node-dri-package-calling-countobjectsoptions-onsuccess-onerror-with-no-options">Calling countObjects(options, onSuccess, onError) with no options</a></li>
<li><a href="#test-cases-for-node-dri-package-calling-queryfield-value-onsuccess-onerror-">Calling query(field, value, onSuccess, onError) </a></li>
<li><a href="#test-cases-for-node-dri-package-calling-removeobjectid-onsuccess-onerror-with-a-item-id">Calling removeObject(id, onSuccess, onError) with a item id</a></li>
<li><a href="#test-cases-for-node-dri-package-calling-removeobjectid-onsuccess-onerror-with-a-series-id">Calling removeObject(id, onSuccess, onError) with a series id</a></li>
<li><a href="#test-cases-for-node-dri-package-calling-removeobjectid-onsuccess-onerror-with-a-collection-id">Calling removeObject(id, onSuccess, onError) with a collection id</a>
<a name=""></a></li>
</ul>
</li>
</ul>
<p><a name="test-cases-for-node-dri-package"></a>
</p>
<h1>Test cases for node-dri package</h1>
<p><a name="test-cases-for-node-dri-package-calling-getobjecttypesonsuccess-onerror-will-get-object-types"></a>
</p>
<h2>Calling getObjectTypes(onSuccess, onError), will get object types</h2>
<p>should return an array of all the object types.

</p>
<pre><code class="js">            dri.getObjectTypes(function(result) {
                result.should.be.ok
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-calling-createobjectdata-onsuccess-onerror-to-create-a-collection"></a>
</p>
<h2>Calling createObject(data, onSuccess, onError) to create a collection</h2>
<p>should create a collection and return the id of the collection.

</p>
<pre><code class="js">            var data = {
                properties : {
                    titleInfo : [{
                        title : "AutoTestColl" + rnd,
                        subtitle : "SubAutoTestColl" + rnd
                    }]
                },
                status : "open",
                type : "collection"
            };
            dri.createObject(data, function(result) {
                result.should.be.ok
                assert.lengthOf(result, 24)
                collId = result;
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-calling-createobjectdata-onsuccess-onerror-to-create-a-series"></a>
</p>
<h2>Calling createObject(data, onSuccess, onError) to create a series</h2>
<p>should create a series and return the id of the series.

</p>
<pre><code class="js">            var data = {
                properties : {
                    titleInfo : [{
                        title : "AutoTestSeries" + rnd,
                        subtitle : "SubAutoTestSeries" + rnd
                    }]
                },
                status : "open",
                type : "series",
                parentId : collId
            };
            dri.createObject(data, function(result) {
                result.should.be.ok
                assert.lengthOf(result, 24)
                seriesId = result;
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-calling-createobjectdata-onsuccess-onerror-to-create-an-item"></a>
</p>
<h2>Calling createObject(data, onSuccess, onError) to create an item</h2>
<p>should create an Item and return the id of the Item.

</p>
<pre><code class="js">            var data = {
                properties : {
                    titleInfo : [{
                        title : "AutoTestItem" + rnd,
                        subtitle : "SubAutoTestItem" + rnd
                    }]
                },
                status : "open",
                type : "item",
                parentId : seriesId
            };
            dri.createObject(data, function(result) {
                result.should.be.ok
                assert.lengthOf(result, 24)
                itemId = result;
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-calling-getobjectid-onsuccess-onerror-to-get-an-item"></a>
</p>
<h2>Calling getObject(id, onSuccess, onError) to get an item</h2>
<p>should get an Item and return the Item.

</p>
<pre><code class="js">            dri.getObject(itemId, function(result) {
                assert.include(result._id, itemId)
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-calling-getobjectid-onsuccess-onerror-to-get-an-item-and-convert-to-dublin-core"></a>
</p>
<h2>Calling getObject(id, onSuccess, onError) to get an item and convert to Dublin Core</h2>
<p>should get an Item and return the Item.

</p>
<pre><code class="js">            dri.getObject(itemId, function(result) {
                var dc = dri.convertToDC(result)
                assert.include(dc, itemId)
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-calling-getobjectid-onsuccess-onerror-to-get-a-series"></a>
</p>
<h2>Calling getObject(id, onSuccess, onError) to get a Series</h2>
<p>should get an series and return the series.

</p>
<pre><code class="js">            dri.getObject(seriesId, function(result) {
                assert.equal(seriesId, result._id);
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-calling-getchildrenparentid-onsuccess-onerror-to-get-the-children-of-a-series"></a>
</p>
<h2>Calling getChildren(parentId, onSuccess, onError) to get the children of a series</h2>
<p>should get the series and return the children.

</p>
<pre><code class="js">            dri.getChildren(seriesId, 0, 20, function(result) {
                assert.include(result[0], itemId);
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-calling-getobjectid-onsuccess-onerror-to-get-a-collection"></a>
</p>
<h2>Calling getObject(id, onSuccess, onError) to get a collection</h2>
<p>should get a collection and return the collection.

</p>
<pre><code class="js">            dri.getObject(collId, function(result) {
                assert.equal(collId, result._id);
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-calling-approveitemid-fedoranamespace-onsuccess-onerror-with-a-item-id"></a>
</p>
<h2>Calling approveItem(id, fedoraNamespace, onSuccess, onError) with a item id</h2>
<p>should push the item into fedora and return the fedora id from that item.

</p>
<pre><code class="js">            dri.approveItem(itemId, "afedoraLib", function(pid) {
                pid.should.include(":");
                done();
            }, function(err) {
                should.not.exist(e);
                done();
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-calling-countobjectsoptions-onsuccess-onerror-with-no-options"></a>
</p>
<h2>Calling countObjects(options, onSuccess, onError) with no options</h2>
<p>should return the amount of objects in MongoDB.

</p>
<pre><code class="js">            dri.countObjects({}, function(amount) {
                assert.isNumber(amount)
                done();
            }, function(err) {
                should.not.exist(e);
                done();
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-calling-queryfield-value-onsuccess-onerror-"></a>
</p>
<h2>Calling query(field, value, onSuccess, onError)</h2>
<p>should return an array containing objects that contain the searched field.

</p>
<pre><code class="js">            dri.query("label", "50c25df5b", function(data) {
                should.exist(data)
                assert.include(data[0], "label");
                assert.include(data[0], "e2f");
                done();
            }, function(err) {
                should.not.exist(e);
                done();
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-calling-removeobjectid-onsuccess-onerror-with-a-item-id"></a>
</p>
<h2>Calling removeObject(id, onSuccess, onError) with a item id</h2>
<p>should remove the item from MongoDB.

</p>
<pre><code class="js">            dri.removeObject(itemId, function(result) {
                assert.include(result, itemId)
                done();
            }, function(err) {
                should.not.exist(e);
                done();
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-calling-removeobjectid-onsuccess-onerror-with-a-series-id"></a>
</p>
<h2>Calling removeObject(id, onSuccess, onError) with a series id</h2>
<p>should remove the series from MongoDB.

</p>
<pre><code class="js">            dri.removeObject(seriesId, function(result) {
                assert.include(result, seriesId)
                done();
            }, function(err) {
                should.not.exist(e);
                done();
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-calling-removeobjectid-onsuccess-onerror-with-a-collection-id"></a>
</p>
<h2>Calling removeObject(id, onSuccess, onError) with a collection id</h2>
<p>should remove the collection from MongoDB.

</p>
<pre><code class="js">            dri.removeObject(collId, function(result) {
                assert.include(result, collId)
                done();
            }, function(err) {
                should.not.exist(e);
                done();
            });</code></pre>
<p>make[2]: Leaving directory `/data/home/jtang/develop/dris-workflows-site/build/node-dri'
</p>
</div>
					</article>
				</div>
				<div class="span3">
					<nav id="toc"><ul><li><a href="/contact">contact</a></li><li><a href="/api-for-dri-api">api for dri api</a></li><li><a href="/api-for-node-fedora">api for node fedora</a></li><li><a href="/api-for-node-dri">api for node dri</a></li><li><a href="/all-pages">all pages</a></li></ul></nav>
				</div>
			</div>
		</div>
		<footer id="footer">
			<hr>
			<p>
				<a href="/">DRIS Workflows</a> documentation site powered by <a href="https://github.com/flatiron/blacksmith">Blacksmith</a> / styled with <a href="http://twitter.github.com/bootstrap/">twitter bootstrap</a>
			</p>
		</footer>
	</div>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script>
		$(document).ready(function() {
			$('#toc ul').addClass('nav nav-list');
			$('#toc ul').prepend('<li class="nav-header">Table of contents</li>')
			$('.breadcrumb').removeClass('breadcrumb')
		})
	</script>
</html>


<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="description" content="DRIS Workflows">
		<meta name="keywords" content="node-dri,node-fedora,tchpc,dri,dris-workflows,howest">
		<title> DRIS Workflows</title>
		<script type="text/javascript">var _sf_startpt = (new Date()).getTime()</script>
		<link rel="stylesheet" href="/css/bootstrap.css" type="text/css" media="all">
	</head>
	<div class="navbar">
		<div class="navbar-inner">
			<div class="container-fluid">
				<a class="brand" href="#">DRIS</a>
				<ul class="nav">
					<li>
						<a href="/">Home</a>
					</li>
					<li>
						<a href="/contact">Contact</a>
					</li>
					<li>
						<a href="all-pages">All Pages</a>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span12">
				<div class="span9">
					
				<article class="article">
						<div class="metadata">
							<h1><span class="title"><a href=".">DRIS Workflows</a></span><small> <span class="about">by <strong class="author"> <span class="name">Jimmy Tang</span> <span class="github"></span> </strong> </span> <span class="about"> on <em><time class="date">Thursday, Mar 29 2012</time></em></span> </small></h1>
							<div class="breadcrumbs">
								@: / <a href="" class="breadcrumb"></a>
							</div>
						</div>
						<div class="content"><p>The DRIS Workflows package is a prototype system developed by some interns at TCHPC during the 2012 internship.

</p>
<h2>Primary authors of DRIS Workflows</h2>
<ul>
<li><a href="mailto:Matthias.Van.Wambeke@howest.be">Matthias.Van.Wambeke@howest.be</a></li>
<li><a href="mailto:Quirijn.Groot.Bluemink@howest.be">Quirijn.Groot.Bluemink@howest.be</a>

</li>
</ul>
<p>With help from the TCHPC and DRIS team at TCD.
</p>
</div>
					</article><article class="article">
						<div class="metadata">
							<h1><span class="title"><a href="./contact">contact</a></span><small> <span class="about">by <strong class="author"> <span class="name">jtang</span> <span class="github"></span> </strong> </span> <span class="about"> on <em><time class="date">Tuesday, Apr 10 2012</time></em></span> </small></h1>
							<div class="breadcrumbs">
								@: / 
							<a href="" class="breadcrumb">contact</a></div>
						</div>
						<div class="content"><p>People to contact for more information relating to the work that was carried out.

</p>
<h2>HOWEST</h2>
<ul>
<li>Groot Bluemink Quirijn <a href="mailto:Quirijn.Groot.Bluemink@howest.be">Quirijn.Groot.Bluemink@howest.be</a></li>
<li>Van Wambeke Matthias <a href="mailto:Matthias.Van.Wambeke@howest.be">Matthias.Van.Wambeke@howest.be</a></li>
</ul>
<h2>TCHPC, Trinity College Dublin</h2>
<ul>
<li>Jimmy Tang <a href="mailto:jtang@tchpc.tcd.ie">jtang@tchpc.tcd.ie</a> - 01-896-4466 - 086-3135905</li>
<li>Darach Golden <a href="mailto:darach@tchpc.tcd.ie">darach@tchpc.tcd.ie</a> - 01-896-3847 - 087-8229592</li>
</ul>
<h2>DRIS, Trinity College Dublin</h2>
<ul>
<li>DRIS Contacts not listed until permission is granted</li>
</ul>
</div>
					</article><article class="article">
						<div class="metadata">
							<h1><span class="title"><a href="./api-for-dri-api">API for dri-api</a></span><small> <span class="about">by <strong class="author"> <span class="name">jtang</span> <span class="github"></span> </strong> </span> <span class="about"> on <em><time class="date">Tuesday, Apr 10 2012</time></em></span> </small></h1>
							<div class="breadcrumbs">
								@: / 
							<a href="" class="breadcrumb">api-for-dri-api</a></div>
						</div>
						<div class="content"><h1>TOC</h1>
<ul>
<li><a href="#tests-for-dri-apiv2">Tests for DRI APIv2</a><ul>
<li><a href="#tests-for-dri-apiv2-get-">GET /</a></li>
<li><a href="#tests-for-dri-apiv2-post-devcollections">POST /dev/collections</a></li>
<li><a href="#tests-for-dri-apiv2-post-devcollectionsidseries">POST /dev/collections/:id/series</a></li>
<li><a href="#tests-for-dri-apiv2-post-devcollectionsidseriesiditems">POST /dev/collections/:id/series/:id/items</a></li>
<li><a href="#tests-for-dri-apiv2-get-devcollections">GET /dev/collections</a></li>
<li><a href="#tests-for-dri-apiv2-get-devcollectionsid">GET /dev/collections/:id</a></li>
<li><a href="#tests-for-dri-apiv2-get-devcollectionsidseries">GET /dev/collections/:id/series</a></li>
<li><a href="#tests-for-dri-apiv2-get-devcollectionsidseriesid">GET /dev/collections/:id/series/:id</a></li>
<li><a href="#tests-for-dri-apiv2-get-devcollectionsidseriesiditems">GET /dev/collections/:id/series/:id/items</a></li>
<li><a href="#tests-for-dri-apiv2-get-devcollectionsidseriesiditemsid">GET /dev/collections/:id/series/:id/items/:id</a>
<a name=""></a></li>
</ul>
</li>
</ul>
<p><a name="tests-for-dri-apiv2"></a>
</p>
<h1>Tests for DRI APIv2</h1>
<p><a name="tests-for-dri-apiv2-get-"></a>
</p>
<h2>GET /</h2>
<p>should respond with the root page, this is just a sanity check.

</p>
<pre><code class="js">            request({
                method : 'GET',
                uri : socket + '/'
            }, function(err, resp, body) {
                assert.isNull(err);
                assert.include(body, '&lt;title&gt;DRI API&lt;/title&gt;');
                done();
            });</code></pre>
<p><a name="tests-for-dri-apiv2-post-devcollections"></a>
</p>
<h2>POST /dev/collections</h2>
<p>should respond with the id of the created collection.

</p>
<pre><code class="js">            request({
                method : 'POST',
                uri : socket + '/dev/collections',
                form : {
                    Title : 'Autobot collection'
                }
            }, function(err, resp, body) {
                assert.isNull(err);
                assert.isDefined(body);
                assert.length(body, 24);
                collectionId = body;
                done();
            });</code></pre>
<p><a name="tests-for-dri-apiv2-post-devcollectionsidseries"></a>
</p>
<h2>POST /dev/collections/:id/series</h2>
<p>should respond with the id of the created series.

</p>
<pre><code class="js">            request({
                method : 'POST',
                uri : socket + '/dev/collections/' + collectionId + '/series',
                form : {
                    Title : 'Autobot series',
                    author : 'Autobot',
                    parentId : collectionId
                }
            }, function(err, resp, body) {
                assert.isNull(err);
                assert.isDefined(body);
                assert.length(body, 24);
                seriesId = body;
                done();
            });</code></pre>
<p><a name="tests-for-dri-apiv2-post-devcollectionsidseriesiditems"></a>
</p>
<h2>POST /dev/collections/:id/series/:id/items</h2>
<p>should respond with the id of the created item.

</p>
<pre><code class="js">            request({
                method : 'POST',
                uri : socket + '/dev/collections/'
                    + collectionId + '/series/' 
                    + seriesId + '/items',
                form : {
                    Title : 'Autobot title'
                }
            }, function(err, resp, body) {
                assert.isNull(err);
                assert.isDefined(body);
                assert.length(body, 24);
                itemId = body;
                done();
            });</code></pre>
<p><a name="tests-for-dri-apiv2-get-devcollections"></a>
</p>
<h2>GET /dev/collections</h2>
<p>should respond with an array of all the collections.

</p>
<pre><code class="js">
            request({
                method : 'GET',
                uri : socket + '/dev/collections'
            }, function(err, resp, body) {
                assert.isNull(err);
                assert.include(body, collectionId);
                assert.include(body, "Autobot collection");
                done();
            });</code></pre>
<p><a name="tests-for-dri-apiv2-get-devcollectionsid"></a>
</p>
<h2>GET /dev/collections/:id</h2>
<p>should respond with the array containing the data of the specified collection.

</p>
<pre><code class="js">
            request({
                method : 'GET',
                uri : socket + '/dev/collections/' + collectionId
            }, function(err, resp, body) {
                var json = JSON.parse(body);
                assert.isNull(err);
                assert.isDefined(body);
                assert.equal(json.Title, "Autobot collection");
                done();
            });</code></pre>
<p><a name="tests-for-dri-apiv2-get-devcollectionsidseries"></a>
</p>
<h2>GET /dev/collections/:id/series</h2>
<p>should respond with an array of all the series corresponding to the given id.

</p>
<pre><code class="js">            request({
                method : 'GET',
                uri : socket + '/dev/collections/' + collectionId + '/series'
            }, function(err, resp, body) {
                assert.isNull(err);
                assert.include(body, seriesId);
                assert.include(body, "Autobot series");
                done();
            });</code></pre>
<p><a name="tests-for-dri-apiv2-get-devcollectionsidseriesid"></a>
</p>
<h2>GET /dev/collections/:id/series/:id</h2>
<p>should respond with the array containing the data of the specified series.

</p>
<pre><code class="js">            request({
                method : 'GET',
                uri : socket + '/dev/collections/' + collectionId + '/series/' + seriesId
            }, function(err, resp, body) {
                var json = JSON.parse(body);
                assert.isNull(err);
                assert.isDefined(body);
                assert.equal(json.Title, "Autobot series");
                done();
            });</code></pre>
<p><a name="tests-for-dri-apiv2-get-devcollectionsidseriesiditems"></a>
</p>
<h2>GET /dev/collections/:id/series/:id/items</h2>
<p>should respond with an array of all the items corresponding to the given ids.

</p>
<pre><code class="js">            request({
                method : 'GET',
                uri : socket + '/dev/collections/' 
                    + collectionId + '/series/'
                    + seriesId + '/items'
            }, function(err, resp, body) {
                assert.isNull(err);
                assert.include(body, itemId);
                assert.include(body, "Autobot title");
                done();
            });</code></pre>
<p><a name="tests-for-dri-apiv2-get-devcollectionsidseriesiditemsid"></a>
</p>
<h2>GET /dev/collections/:id/series/:id/items/:id</h2>
<p>should respond with the array containing the data of the specified item.

</p>
<pre><code class="js">            request({
                method : 'GET',
                uri : socket + '/dev/collections/'
                    + collectionId + '/series/'
                    + seriesId + '/items/' + itemId
            }, function(err, resp, body) {
                var json = JSON.parse(body);
                assert.isNull(err);
                assert.isDefined(body);
                assert.equal(json.Title, "Autobot title");
                done();
            });</code></pre>
</div>
					</article><article class="article">
						<div class="metadata">
							<h1><span class="title"><a href="./api-for-node-fedora">API for node-fedora</a></span><small> <span class="about">by <strong class="author"> <span class="name">jtang</span> <span class="github"></span> </strong> </span> <span class="about"> on <em><time class="date">Tuesday, Apr 10 2012</time></em></span> </small></h1>
							<div class="breadcrumbs">
								@: / 
							<a href="" class="breadcrumb">api-for-node-fedora</a></div>
						</div>
						<div class="content"><h1>TOC</h1>
<ul>
<li><a href="#test-cases-for-the-node-fedora-package">Test cases for the node-fedora package</a><ul>
<li><a href="#test-cases-for-the-node-fedora-package-createfedoraobject-will-create-a-fedoraobject">createFedoraObject, will create a FedoraObject</a></li>
<li><a href="#test-cases-for-the-node-fedora-package-getfedoralist-get-a-list-of-fedoraobjects">getFedoraList, Get a list of FedoraObjects</a></li>
<li><a href="#test-cases-for-the-node-fedora-package-getfedoraobject-get-a-fedoraobject">getFedoraObject, get a fedoraObject</a></li>
<li><a href="#test-cases-for-the-node-fedora-package-deleteobject-will-delete-an-object-from-fedora">deleteObject, will delete an object from fedora</a></li>
<li><a href="#test-cases-for-the-node-fedora-package-getnextpid-will-get-the-next-pid-that-is-available-from-fedora">getNextPID, will get the next PID that is available from fedora</a>
<a name=""></a></li>
</ul>
</li>
</ul>
<p><a name="test-cases-for-the-node-fedora-package"></a>
</p>
<h1>Test cases for the node-fedora package</h1>
<p><a name="test-cases-for-the-node-fedora-package-createfedoraobject-will-create-a-fedoraobject"></a>
</p>
<h2>createFedoraObject, will create a FedoraObject</h2>
<p>should create a FedoraObject.

</p>
<pre><code class="js">            fedora.createFedoraObject(testNamespace,testLabel, function(result){
                testResult = result;
                result.should.exist;
                result.should.include(testNamespace + ":");
                done();
            });</code></pre>
<p><a name="test-cases-for-the-node-fedora-package-getfedoralist-get-a-list-of-fedoraobjects"></a>
</p>
<h2>getFedoraList, Get a list of FedoraObjects</h2>
<p>should return a list of FedoraObjects from the fedora repository.

</p>
<pre><code class="js">            fedora.getFedoraList("*",function(resultData){
                resultData.should.exist;
                resultData.should.include('result');
                resultData.should.not.be.empty;
            }, 
            function(error){
                should.not.exist(error);
            });</code></pre>
<p><a name="test-cases-for-the-node-fedora-package-getfedoraobject-get-a-fedoraobject"></a>
</p>
<h2>getFedoraObject, get a fedoraObject</h2>
<p>should return a fedoraObject.

</p>
<pre><code class="js">            fedora.getFedoraObject(testResult, function(resultData){
                resultData.should.include(testResult);
                done();
            });</code></pre>
<p><a name="test-cases-for-the-node-fedora-package-deleteobject-will-delete-an-object-from-fedora"></a>
</p>
<h2>deleteObject, will delete an object from fedora</h2>
<p>should delete the requested object from fedora.

</p>
<pre><code class="js">            fedora.deleteObject(testResult, function(resultData){
                var myregexp = new RegExp("[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}.?[0-9]*Z");
                resultData.should.match(myregexp);
                done();
            }, function(error){
                should.not.exist(error);
            });</code></pre>
<p><a name="test-cases-for-the-node-fedora-package-getnextpid-will-get-the-next-pid-that-is-available-from-fedora"></a>
</p>
<h2>getNextPID, will get the next PID that is available from fedora</h2>
<p>should return the next PID from fedora.

</p>
<pre><code class="js">            fedora.getNextPID("node", function(resultData){
                resultData.should.include("node:");
                done();
            });</code></pre>
</div>
					</article><article class="article">
						<div class="metadata">
							<h1><span class="title"><a href="./api-for-node-dri">API for node-dri</a></span><small> <span class="about">by <strong class="author"> <span class="name">jtang</span> <span class="github"></span> </strong> </span> <span class="about"> on <em><time class="date">Tuesday, Apr 10 2012</time></em></span> </small></h1>
							<div class="breadcrumbs">
								@: / 
							<a href="" class="breadcrumb">api-for-node-dri</a></div>
						</div>
						<div class="content"><h1>TOC</h1>
<ul>
<li><a href="#test-cases-for-node-dri-package">Test cases for node-dri package</a><ul>
<li><a href="#test-cases-for-node-dri-package-creating-a-dri-collection">Creating a Dri-Collection</a></li>
<li><a href="#test-cases-for-node-dri-package-creating-a-series">Creating a Series</a></li>
<li><a href="#test-cases-for-node-dri-package-creating-an-item">Creating an Item</a></li>
<li><a href="#test-cases-for-node-dri-package-adding-an-item-to-series">Adding an Item to series</a></li>
<li><a href="#test-cases-for-node-dri-package-getting-an-item">Getting an Item</a></li>
<li><a href="#test-cases-for-node-dri-package-getting-a-series">Getting a Series</a></li>
<li><a href="#test-cases-for-node-dri-package-getting-a-dri-collection">Getting a Dri-Collection</a></li>
<li><a href="#test-cases-for-node-dri-package-pushing-the-item-into-fedora">Pushing the item into fedora</a>
<a name=""></a></li>
</ul>
</li>
</ul>
<p><a name="test-cases-for-node-dri-package"></a>
</p>
<h1>Test cases for node-dri package</h1>
<p><a name="test-cases-for-node-dri-package-creating-a-dri-collection"></a>
</p>
<h2>Creating a Dri-Collection</h2>
<p>should create a Dri-Collection and return the id of the Dri-Collection.

</p>
<pre><code class="js">            var data = {
                properties : {
                    title : "AutoTestColl" + rnd,
                    subtitle : "AutoTestColl" + rnd
                },
                status : "Open"
            };
            dri.createCollection(data, function(result) {
                result.should.be.ok
                assert.length(result,24)
                collId = result;
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-creating-a-series"></a>
</p>
<h2>Creating a Series</h2>
<p>should create a series and return the id of the series.

</p>
<pre><code class="js">            var data = {
                properties : {
                    title : "AutoTestColl" + rnd,
                    subtitle : "AutoTestColl" + rnd
                },
                status : "Open"
            };
            dri.createSeries(data, function(result) {
                result.should.be.ok
                assert.length(result,24)
                seriesId = result;
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-creating-an-item"></a>
</p>
<h2>Creating an Item</h2>
<p>should create an Item and return the id of the Item.

</p>
<pre><code class="js">            var data = {
                properties : {
                    title : "AutoTestColl" + rnd,
                    subtitle : "AutoTestColl" + rnd
                },
                status : "Approved"
            };
            dri.createItem(data, function(result) {
                result.should.be.ok
                assert.length(result,24)
                itemId = result;
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-adding-an-item-to-series"></a>
</p>
<h2>Adding an Item to series</h2>
<p>should add the given item to the given series.

</p>
<pre><code class="js">
            dri.addItemToSeries(itemId, seriesId, function(result) {
                result.should.be.ok
                assert.include(result,itemId)
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-getting-an-item"></a>
</p>
<h2>Getting an Item</h2>
<p>should get an Item and return the Item.

</p>
<pre><code class="js">            dri.getItem(itemId, function(result) {
                assert.include(result._id,itemId)
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-getting-a-series"></a>
</p>
<h2>Getting a Series</h2>
<p>should get an Series and return the Series.

</p>
<pre><code class="js">            dri.getSeries(seriesId, function(result) {
                assert.equal(seriesId, result._id);
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-getting-a-dri-collection"></a>
</p>
<h2>Getting a Dri-Collection</h2>
<p>should get an Dri-Collection and return the Dri-Collection.

</p>
<pre><code class="js">            dri.getCollection(collId, function(result) {
                assert.equal(collId, result._id);
                done();
            }, function(e) {
                should.not.exist(e);
            });</code></pre>
<p><a name="test-cases-for-node-dri-package-pushing-the-item-into-fedora"></a>
</p>
<h2>Pushing the item into fedora</h2>
<p>should push the item into fedora and return the fedora id from that item.

</p>
<pre><code class="js">            dri.approveItem(itemId, "cfedoraLib", function(pid) {
                pid.should.include(":");
                done();
            }, function(err) {
                should.not.exist(e);
                done();
            });</code></pre>
</div>
					</article></div>
				<div class="span3">
					<nav id="toc"><ul><li><a href="/contact">contact</a></li><li><a href="/api-for-dri-api">api for dri api</a></li><li><a href="/api-for-node-fedora">api for node fedora</a></li><li><a href="/api-for-node-dri">api for node dri</a></li><li><a href="/all-pages">all pages</a></li></ul></nav>
				</div>
			</div>
		</div>
		<footer id="footer">
			<hr>
			<p>
				<a href="/">DRIS Workflows</a> documentation site powered by <a href="https://github.com/flatiron/blacksmith">Blacksmith</a> / styled with <a href="http://twitter.github.com/bootstrap/">twitter bootstrap</a>
			</p>
		</footer>
	</div>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script>
		$(document).ready(function() {
			$('#toc ul').addClass('nav nav-list');
			$('#toc ul').prepend('<li class="nav-header">Table of contents</li>')
			$('.breadcrumb').removeClass('breadcrumb')
		})
	</script>
</html>
